<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.xyan.api.mapper.CommentMapper">
    <resultMap id="BaseResultMap" type="com.xyan.api.model.CommentModel">
        <id column="id" property="id"  />
        <result column="userId" property="userId"  />
        <result column="userName" property="userName"  />
        <result column="content" property="content"  />
        <result column="blogId" property="blogId"  />
        <result column="commentDate" property="commentDate"/>
        <result column="title" property="title"/>
        <result column="pId" property="pId"/>
    </resultMap>
  	<!-- 根据主键删除对象 -->
  	<delete id="deleteByPrimaryKey" parameterType="java.lang.String" >
  		delete from t_blog_comment where id=#{id}
  	</delete>
  	
  	
  	<!-- 插入单个记录 -->
  	<insert id="insert" parameterType="com.xyan.api.model.CommentModel" >
		insert  into t_blog_comment
		<trim prefix="(" suffix=")" suffixOverrides="," >
		 	ID,
		 	<if test="userId != null and userId != ''" >
		        USERID,
		    </if>
		    <if test="userName != null" >
		        USERNAME,
		    </if>
		    <if test="content != null" >
		        CONTENT,
		    </if>
		    <if test="blogId != null" >
		        BLOGID,
		    </if>
		    <if test="commentDate != null" >
		        COMMENTDATE,
		    </if>
		    <if test="title != null" >
		        TITLE,
		    </if>
		    <if test="pId != null" >
		        PID,
		    </if>
		</trim>			
		<trim prefix="values (" suffix=")" suffixOverrides="," >
		 	#{id},
         	<if test="userId != null and userId != ''" >
		        #{userId},
		    </if>
		    <if test="userName != null" >
		        #{userName},
		    </if>
		    <if test="content != null" >
		        #{content},
		    </if>
		    <if test="blogId != null" >
		        #{blogId},
		    </if>
		    <if test="commentDate != null" >
		        #{commentDate},
		    </if>
		    <if test="title != null" >
		        #{title},
		    </if>
		    <if test="pId != null" >
		        #{pId},
		    </if>
		 </trim>
  	</insert>
  	
  	<!-- 更新单个记录 -->
	<update id="update" parameterType="com.xyan.api.model.BlogModel">
		update t_blog_comment 		
		<set>
			<trim  prefixOverrides=",">
				<if test="id !=null">,  ID =#{id}</if>
				<if test="userId !=null">,  userId =#{userId}</if>
				<if test="userName !=null">,  userName =#{userName}</if>
				<if test="content !=null">,  content =#{content}</if>
				<if test="blogId !=null">,  blogId =#{blogId}</if>
				<if test="commentDate !=null">,  commentDate =#{commentDate}</if>
				<if test="title !=null">,  title =#{title}</if>
				<if test="pId !=null">,  pId =#{pId}</if>
			</trim>
		</set> 		
		where  ID=#{id} 	
	</update>
    
  	<!-- 根据主键查询 -->
  	<select id="selectByPrimaryKey" resultType="com.xyan.api.model.CommentModel"  parameterType="java.lang.String">
  		select * from t_blog_comment where id=#{id}
  	</select>
  	
  	<!-- 根据例子查询 -->
  	<select id="selectByExample"  resultType="com.xyan.api.model.CommentModel" parameterType="java.util.Map">
  		SELECT COMMENT.* FROM T_BLOG_COMMENT COMMENT 
  		<where>
  			<if test="userId !=null"> AND COMMENT.USERID =#{userId}</if>
  			<if test="userName !=null"> AND INSTR(COMMENT.USERNAME ,#{userName})>0 </if>
  			<if test="content !=null"> AND INSTR(COMMENT.CONTENT,#{content})>0 </if>
  			<if test="blogId !=null"> AND COMMENT.BLOGID =#{blogId}</if>
  			<if test="title !=null"> AND INSTR(COMMENT.TITLE ,#{title})>0</if>
  			<if test="pId !=null"> AND COMMENT.PID =#{pId}</if>
  		</where>
  		order by COMMENT.commentDate desc
  	</select>
  	
  	<!-- 计数查询 -->
  	<select id="countByExample"  resultType="java.lang.Integer" parameterType="java.util.HashMap">
  		select count(1) from T_BLOG_COMMENT
  		<where>
  			<if test="userId !=null"> and userId =#{userId}</if>
  			<if test="userName !=null"> and instr(userName ,#{userName})>0 </if>
  			<if test="content !=null"> and instr(content,#{content})>0 </if>
  			<if test="blogId !=null"> and blogId =#{blogId}</if>
  			<if test="title !=null"> and instr(title, #{title})>0</if>
  			<if test="pId !=null"> and pId =#{pId}</if>
  		</where>
  	</select>
  	
</mapper>