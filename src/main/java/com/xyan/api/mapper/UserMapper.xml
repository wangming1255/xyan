<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.xyan.api.mapper.UserMapper">
   <resultMap id="BaseResultMap" type="com.xyan.api.model.UserModel">
        <id column="id" property="id"  />
        <result column="userName" property="userName"/>
        <result column="password" property="password"  />
        <result column="state" property="state"  />
        <result column="CREATETIME" property="createTime" />
        <result column="loginName" property="loginName" />
        <result column="lastLoginDate" property="lastLoginDate" />
        <result column="lastLoginIp" property="lastLoginIp" />
    </resultMap>
    
    <select id="selectByExample"  resultType="com.xyan.api.model.UserModel" parameterType="java.util.HashMap">
  		SELECT u.* FROM T_USER u 
  		<where>
  			<if test="userName !=null"> AND u.userName =#{userName}</if>
  			<if test="password !=null"> AND u.password =#{password}</if>
  			<if test="state !=null"> AND u.state =#{state} </if>
  			<if test="loginName !=null"> AND u.loginName =#{loginName}</if>
  		</where>
  	</select>
  	
    <select id="selectLikeExample"  resultType="com.xyan.api.model.UserModel" parameterType="java.util.Map">
  		SELECT u.* FROM T_USER u 
  		<where>
  			<if test="userName !=null"> AND instr(u.userName,#{userName})>0</if>
  			<if test="password !=null"> AND u.password =#{password}</if>
  			<if test="state !=null"> AND u.state =#{state} </if>
  			<if test="loginName !=null"> AND instr(u.loginName,#{loginName})>0</if>
  		</where>
  	</select>
  	
  	<!-- 插入单个记录 -->
  	<insert id="insert" parameterType="com.xyan.api.model.UserModel" >
		insert  into t_user 
		<trim prefix="(" suffix=")" suffixOverrides="," >
		 	ID,
		 	<if test="username != null and username != ''" >
		        USERNAME,
		    </if>
		    <if test="password != null" >
		        PASSWORD,
		    </if>
		    <if test="state != null" >
		        STATE,
		    </if>
		    <if test="createTime != null" >
		        CREATE_TIME,
		    </if>
		    <if test="loginName != null" >
		        LOGINNAME,
		    </if>
		    <if test="lastLoginDate != null" >
		        LASTLOGINDATE,
		    </if>
		    <if test="lastLoginIp != null" >
		        LASTLOGINIP,
		    </if>
		</trim>			
		<trim prefix="values (" suffix=")" suffixOverrides="," >
		 	#{id},
         	<if test="username != null and username != ''" >
		        #{typeId},
		    </if>
		    <if test="password != null" >
		        #{typeName},
		    </if>
		    <if test="state != null" >
		        #{state},
		    </if>
		    <if test="createTime != null" >
		        #{createTime},
		    </if>
		    <if test="loginName != null" >
		        #{loginName},
		    </if>
		    <if test="lastLoginDate != null" >
		         #{lastLoginDate},
		    </if>
		    <if test="lastLoginIp != null" >
		        #{lastLoginIp},
		    </if>
		 </trim> 
  	</insert>
  	
  	 	<!-- 根据主键删除对象 -->
  	<delete id="deleteByPrimaryKey" parameterType="java.lang.String" >
  		delete from t_user where id=#{id}
  	</delete>
  	
  	<!-- 更新单个记录 -->
	<update id="update" parameterType="com.xyan.api.model.UserModel">
		update t_user 		
		<set>
			<trim  prefixOverrides=",">
				<if test="userName !=null">,  userName =#{userName}</if>
				<if test="password !=null">,  PASSWORD =#{password}</if>
				<if test="state !=null">,  STATE =#{state}</if>
				<if test="createTime !=null">,  CREATETIME =#{createTime}</if>
				<if test="loginName !=null">, LOGINNAME =#{loginName}</if>
				<if test="lastLoginDate !=null">, LASTLOGINDATE =#{lastLoginDate}</if>
				<if test="lastLoginIp !=null ">,  LASTLOGINIP =#{lastLoginIp}</if>
			</trim>
		</set> 		
		where  ID=#{id} 	
	</update>
</mapper>